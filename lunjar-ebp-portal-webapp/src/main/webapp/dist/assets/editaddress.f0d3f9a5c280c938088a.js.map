{"version":3,"sources":["webpack:///editaddress.f0d3f9a5c280c938088a.js","webpack:///./assets/pages/editaddress/index.js","webpack:///./assets/pages/editaddress/option.tpl"],"names":["webpackJsonp","0","module","exports","__webpack_require__","36","_interopRequireDefault","obj","__esModule","default","_jquery","_jquery2","_template","_template2","_addressApi","_responseUtil","_option","_option2","PHONE_RE","updateCitySelector","provinceCode","$provinceSelector","find","data","getCitysByProvince","then","res","selected","$citySelector","val","tpl","compile","list","html","updateRegionSelector","handleError","cityCode","$regionSelector","removeClass","addClass","commitAddress","e","$btn","currentTarget","address","$form","serializeJsonObj","buyerName","buyerAddress","test","buyerPhone","saveAddress","showSuccessTip","msg","setTimeout","window","location","href","on","document","67","85"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GAE/BF,EAAOC,QAAUC,EAAoB,KAKhCC,GACA,SAASH,EAAQC,EAASC,GAE/B,YAsBA,SAASE,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GCnCxFH,EAAA,EACA,IAAAM,GAAAN,EAAA,GDkBKO,EAAWL,EAAuBI,GCjBvCE,EAAAR,EAAA,GDqBKS,EAAaP,EAAuBM,GCpBzCE,EAAAV,EAAA,GAKAW,EAAAX,EAAA,GAIAY,EAAAZ,EAAA,IDmBKa,EAAWX,EAAuBU,EClBvCZ,GAAA,GAEA,IAAMc,GAAW,qBAGjB,EAAAP,cAAE,WAaD,QAASQ,KACR,GAAMC,GAAeC,EAAkBC,KAAK,mBAAmBC,KAAK,SAEpE,EAAAT,EAAAU,oBAAmBJ,GAAcK,KAAK,SAAAC,GACrC,GAAMC,GAAWC,EAAcN,KAAK,mBAAmBO,MACjDC,EAAMjB,aAASkB,QAATd,eACXe,KAAMN,EAAIM,KACVL,YAGDC,GAAcK,KAAKH,GACnBI,KARDnB,EAAAoB,aAYD,QAASD,KACR,GAAME,GAAWR,EAAcN,KAAK,mBAAmBC,KAAK,SAE5D,EAAAT,EAAAU,oBAAmBY,GAAUX,KAAK,SAAAC,GACjC,GAAMC,GAAWU,EAAgBf,KAAK,mBAAmBO,MACnDC,EAAMjB,aAASkB,QAATd,eACXe,KAAMN,EAAIM,KACVL,YAGDU,GAAgBJ,KAAKH,GAChBJ,EAAIM,KAGRK,EAAgBC,YAAY,YAF5BD,EAAgBE,SAAS,aAT3BxB,EAAAoB,aAgBD,QAASK,GAAcC,GACtB,GAAMC,IAAO,EAAA/B,cAAE8B,EAAEE,eACXC,EAAUC,EAAMC,kBAEtB,OAAKF,GAAQG,UAMRH,EAAQI,aAMR9B,EAAS+B,KAAKL,EAAQM,aAO3BR,EAAKH,SAAS,iBACd,EAAAzB,EAAAqC,aAAYP,GAASnB,KAAK,SAAAC,IACzB,EAAAX,EAAAqC,gBAAe1B,EAAI2B,KACnBC,WAAW,WACVC,OAAOC,SAASC,KAAO,oBACrB,OACD,SAAAhB,GACFC,EAAKH,SAAS,aACd,EAAAxB,EAAAoB,aAAYM,WAdZ,EAAA1B,EAAAoB,cACCkB,IAAK,sBAPN,EAAAtC,EAAAoB,cACCkB,IAAK,oBAPN,EAAAtC,EAAAoB,cACCkB,IAAK,cApDR,GAAMR,IAAQ,EAAAlC,cAAE,aACVU,GAAoB,EAAAV,cAAE,2BACtBiB,GAAgB,EAAAjB,cAAE,uBAClB0B,GAAkB,EAAA1B,cAAE,wBAG1BQ,KACAE,EAAkBqC,GAAG,SAAUvC,GAC/BS,EAAc8B,GAAG,SAAUxB,IAC3B,EAAAvB,cAAEgD,UAAUD,GAAG,QAAS,8BAA+BlB,MD+FlDoB,GACA,SAAS1D,EAAQC,KAMjB0D,GACA,SAAS3D,EAAQC,GEnIvBD,EAAAC,QAAA","file":"editaddress.f0d3f9a5c280c938088a.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(36);\n\n\n/***/ },\n\n/***/ 36:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(3);\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _template = __webpack_require__(2);\n\t\n\tvar _template2 = _interopRequireDefault(_template);\n\t\n\tvar _addressApi = __webpack_require__(9);\n\t\n\tvar _responseUtil = __webpack_require__(4);\n\t\n\tvar _option = __webpack_require__(85);\n\t\n\tvar _option2 = _interopRequireDefault(_option);\n\t\n\t__webpack_require__(67);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PHONE_RE = /^1[3578][0-9]{9}$/;\n\t\n\t(0, _jquery2.default)(function () {\n\t\tvar $form = (0, _jquery2.default)('#addrForm');\n\t\tvar $provinceSelector = (0, _jquery2.default)('select[name=\"province\"]');\n\t\tvar $citySelector = (0, _jquery2.default)('select[name=\"city\"]');\n\t\tvar $regionSelector = (0, _jquery2.default)('select[name=\"region\"]');\n\t\n\t\t// 初始化城市、地区的数据\n\t\tupdateCitySelector();\n\t\t$provinceSelector.on('change', updateCitySelector);\n\t\t$citySelector.on('change', updateRegionSelector);\n\t\t(0, _jquery2.default)(document).on('click', '.js-saveaddr:not(.disabled)', commitAddress);\n\t\n\t\tfunction updateCitySelector() {\n\t\t\tvar provinceCode = $provinceSelector.find('option:selected').data('code');\n\t\n\t\t\t(0, _addressApi.getCitysByProvince)(provinceCode).then(function (res) {\n\t\t\t\tvar selected = $citySelector.find('option:selected').val();\n\t\t\t\tvar tpl = _template2.default.compile(_option2.default)({\n\t\t\t\t\tlist: res.list,\n\t\t\t\t\tselected: selected\n\t\t\t\t});\n\t\n\t\t\t\t$citySelector.html(tpl);\n\t\t\t\tupdateRegionSelector();\n\t\t\t}, _responseUtil.handleError);\n\t\t}\n\t\n\t\tfunction updateRegionSelector() {\n\t\t\tvar cityCode = $citySelector.find('option:selected').data('code');\n\t\n\t\t\t(0, _addressApi.getCitysByProvince)(cityCode).then(function (res) {\n\t\t\t\tvar selected = $regionSelector.find('option:selected').val();\n\t\t\t\tvar tpl = _template2.default.compile(_option2.default)({\n\t\t\t\t\tlist: res.list,\n\t\t\t\t\tselected: selected\n\t\t\t\t});\n\t\n\t\t\t\t$regionSelector.html(tpl);\n\t\t\t\tif (!res.list) {\n\t\t\t\t\t$regionSelector.addClass('z-hidden');\n\t\t\t\t} else {\n\t\t\t\t\t$regionSelector.removeClass('z-hidden');\n\t\t\t\t}\n\t\t\t}, _responseUtil.handleError);\n\t\t}\n\t\n\t\tfunction commitAddress(e) {\n\t\t\tvar $btn = (0, _jquery2.default)(e.currentTarget);\n\t\t\tvar address = $form.serializeJsonObj();\n\t\n\t\t\tif (!address.buyerName) {\n\t\t\t\t(0, _responseUtil.handleError)({\n\t\t\t\t\tmsg: '收货人不能为空哦！'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!address.buyerAddress) {\n\t\t\t\t(0, _responseUtil.handleError)({\n\t\t\t\t\tmsg: '详细地址不能为空哦！'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!PHONE_RE.test(address.buyerPhone)) {\n\t\t\t\t(0, _responseUtil.handleError)({\n\t\t\t\t\tmsg: '请填写正确的手机号码哦！'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t$btn.addClass('disabled');\n\t\t\t(0, _addressApi.saveAddress)(address).then(function (res) {\n\t\t\t\t(0, _responseUtil.showSuccessTip)(res.msg);\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\twindow.location.href = '/buyAddress/list';\n\t\t\t\t}, 1500);\n\t\t\t}, function (e) {\n\t\t\t\t$btn.addClass('disabled');\n\t\t\t\t(0, _responseUtil.handleError)(e);\n\t\t\t});\n\t\t}\n\t});\n\n/***/ },\n\n/***/ 67:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 85:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"{{each list as item i}} {{if item.regionName === selected}} <option value={{item.regionName}} data-code={{item.code}} selected=selected>{{item.regionName}}</option> {{else}} <option value={{item.regionName}} data-code={{item.code}}>{{item.regionName}}</option> {{/if}} {{/each}}\";\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** editaddress.f0d3f9a5c280c938088a.js\n **/","import 'component';\nimport $ from 'jquery';\nimport template from 'art-template/dist/template';\nimport {\n\tsaveAddress,\n\tgetCitysByProvince,\n\tgetRegionByCity\n} from '../../api/address-api';\nimport {\n\thandleError,\n\tshowSuccessTip\n} from '../../utils/response-util.js';\nimport optionTpl from './option';\nimport './editaddress.scss';\n\nconst PHONE_RE = /^1[3578][0-9]{9}$/;\n\n\n$(() => {\n\tconst $form = $('#addrForm');\n\tconst $provinceSelector = $('select[name=\"province\"]');\n\tconst $citySelector = $('select[name=\"city\"]');\n\tconst $regionSelector = $('select[name=\"region\"]');\n\n\t// 初始化城市、地区的数据\n\tupdateCitySelector();\n\t$provinceSelector.on('change', updateCitySelector);\n\t$citySelector.on('change', updateRegionSelector);\n\t$(document).on('click', '.js-saveaddr:not(.disabled)', commitAddress);\n\n\n\tfunction updateCitySelector() {\n\t\tconst provinceCode = $provinceSelector.find('option:selected').data('code');\n\n\t\tgetCitysByProvince(provinceCode).then(res => {\n\t\t\tconst selected = $citySelector.find('option:selected').val();\n\t\t\tconst tpl = template.compile(optionTpl)({\n\t\t\t\tlist: res.list,\n\t\t\t\tselected\n\t\t\t});\n\n\t\t\t$citySelector.html(tpl);\n\t\t\tupdateRegionSelector();\n\t\t}, handleError);\n\t}\n\n\tfunction updateRegionSelector() {\n\t\tconst cityCode = $citySelector.find('option:selected').data('code');\n\n\t\tgetCitysByProvince(cityCode).then(res => {\n\t\t\tconst selected = $regionSelector.find('option:selected').val();\n\t\t\tconst tpl = template.compile(optionTpl)({\n\t\t\t\tlist: res.list,\n\t\t\t\tselected\n\t\t\t});\n\n\t\t\t$regionSelector.html(tpl);\n\t\t\tif (!res.list) {\n\t\t\t\t$regionSelector.addClass('z-hidden');\n\t\t\t} else {\n\t\t\t\t$regionSelector.removeClass('z-hidden');\n\t\t\t}\n\t\t}, handleError);\n\t}\n\n\tfunction commitAddress(e) {\n\t\tconst $btn = $(e.currentTarget);\n\t\tconst address = $form.serializeJsonObj();\n\n\t\tif (!address.buyerName) {\n\t\t\thandleError({\n\t\t\t\tmsg: '收货人不能为空哦！'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (!address.buyerAddress) {\n\t\t\thandleError({\n\t\t\t\tmsg: '详细地址不能为空哦！'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (!PHONE_RE.test(address.buyerPhone)) {\n\t\t\thandleError({\n\t\t\t\tmsg: '请填写正确的手机号码哦！'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t$btn.addClass('disabled');\n\t\tsaveAddress(address).then(res => {\n\t\t\tshowSuccessTip(res.msg);\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.location.href = '/buyAddress/list';\n\t\t\t}, 1500);\n\t\t}, e => {\n\t\t\t$btn.addClass('disabled');\n\t\t\thandleError(e);\n\t\t});\n\t}\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./assets/pages/editaddress/index.js\n **/","module.exports = \"{{each list as item i}} {{if item.regionName === selected}} <option value={{item.regionName}} data-code={{item.code}} selected=selected>{{item.regionName}}</option> {{else}} <option value={{item.regionName}} data-code={{item.code}}>{{item.regionName}}</option> {{/if}} {{/each}}\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/pages/editaddress/option.tpl\n ** module id = 85\n ** module chunks = 6\n **/"],"sourceRoot":""}