{"version":3,"sources":["webpack:///itemlist.461f29e53d49f47ccba5.js","webpack:///./assets/pages/itemlist/index.js","webpack:///./assets/pages/itemlist/item.tpl"],"names":["webpackJsonp","0","module","exports","__webpack_require__","39","_interopRequireDefault","obj","__esModule","default","fecthItemList","$loading","_jquery2","removeClass","_itemApi","getItemList","currentCid","currentPageNo","then","res","addClass","renderItemList","_responseUtil","handleError","tpl","_template2","compile","_item2","isLoadingList","page","hasNext","hasLoadDone","append","LayzrUpdate","_jquery","_template","_component","_item","PAGESIZE","val","Swiper","pagination","loop","autoplay","window","onScrollToBottom","70","86"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GAE/BF,EAAOC,QAAUC,EAAoB,KAKhCC,GACA,SAASH,EAAQC,EAASC,GAE/B,YAsBA,SAASE,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GCQxF,QAASG,KACR,GAAMC,IAAW,EAAAC,cAAE,kBAEnBD,GAASE,YAAY,aACrB,EAAAC,EAAAC,aAAYC,IAAcC,GAAeC,KAAK,SAAAC,GAC7CR,EAASS,SAAS,YAClBC,EAAeF,IAFhBG,EAAAC,aAMD,QAASF,GAAeF,GACvB,GAAMK,GAAMC,aAASC,QAATC,cAA0BR,EAEtCS,IAAgB,EACXT,EAAIU,KAAKC,UACbC,GAAc,GACd,EAAAnB,cAAE,kBAAkBC,YAAY,cAGjC,EAAAD,cAAE,oBAAoBoB,OAAOR,GAC7BZ,aAAEqB,cA/DH,GAAAC,GAAA9B,EAAA,GDiBKQ,EAAWN,EAAuB4B,GChBvCC,EAAA/B,EAAA,GDoBKqB,EAAanB,EAAuB6B,GCnBzCC,EAAAhC,EAAA,GAGAU,EAAAV,EAAA,GAGAkB,EAAAlB,EAAA,GAGAiC,EAAAjC,EAAA,IDoBKuB,EAASrB,EAAuB+B,ECnBrCjC,GAAA,GAEA,IAAMkC,GAAW,GACbV,GAAgB,EAChBG,GAAc,EACdd,EAAgB,EAChBD,EAAa,GAGjB,EAAAJ,cAAE,WAEDmB,GAAc,EAAAnB,cAAE,6BAA6B2B,OAASD,EACtDtB,GAAa,EAAAJ,cAAE,qBAAqB2B,MAGpC,GAAAH,GAAAI,OAAW,kBACVC,WAAY,qBACVC,MAAM,EACNC,SAAU,OAIb,EAAA/B,cAAEgC,QAAQC,iBAAiB,WACrBd,GAAgBH,IACpBA,GAAgB,EAChBlB,UDqDGoC,GACA,SAAS5C,EAAQC,KAMjB4C,GACA,SAAS7C,EAAQC,GElGvBD,EAAAC,QAAA","file":"itemlist.461f29e53d49f47ccba5.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(39);\n\n\n/***/ },\n\n/***/ 39:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _template = __webpack_require__(2);\n\t\n\tvar _template2 = _interopRequireDefault(_template);\n\t\n\tvar _component = __webpack_require__(3);\n\t\n\tvar _itemApi = __webpack_require__(5);\n\t\n\tvar _responseUtil = __webpack_require__(4);\n\t\n\tvar _item = __webpack_require__(86);\n\t\n\tvar _item2 = _interopRequireDefault(_item);\n\t\n\t__webpack_require__(70);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PAGESIZE = 10;\n\tvar isLoadingList = false;\n\tvar hasLoadDone = false;\n\tvar currentPageNo = 1;\n\tvar currentCid = 1;\n\tvar carBox = void 0;\n\t\n\t(0, _jquery2.default)(function () {\n\t\t// 初始化获取数据\n\t\thasLoadDone = (0, _jquery2.default)('input[name=\"hasLoadDone\"]').val() <= PAGESIZE;\n\t\tcurrentCid = (0, _jquery2.default)('input[name=\"cid\"]').val();\n\t\n\t\t// 轮播图\n\t\tnew _component.Swiper('.js-top-swiper', {\n\t\t\tpagination: '.swiper-pagination',\n\t\t\tloop: true,\n\t\t\tautoplay: 3000\n\t\t});\n\t\n\t\t// 下拉到底部刷新列表\n\t\t(0, _jquery2.default)(window).onScrollToBottom(function () {\n\t\t\tif (!hasLoadDone && !isLoadingList) {\n\t\t\t\tisLoadingList = true;\n\t\t\t\tfecthItemList();\n\t\t\t}\n\t\t});\n\t});\n\t\n\tfunction fecthItemList() {\n\t\tvar $loading = (0, _jquery2.default)('.js-loading-box');\n\t\n\t\t$loading.removeClass('z-hidden');\n\t\t(0, _itemApi.getItemList)(currentCid, ++currentPageNo).then(function (res) {\n\t\t\t$loading.addClass('z-hidden');\n\t\t\trenderItemList(res);\n\t\t}, _responseUtil.handleError);\n\t}\n\t\n\tfunction renderItemList(res) {\n\t\tvar tpl = _template2.default.compile(_item2.default)(res);\n\t\n\t\tisLoadingList = false;\n\t\tif (!res.page.hasNext) {\n\t\t\thasLoadDone = true;\n\t\t\t(0, _jquery2.default)('.js-loaded-all').removeClass('z-hidden');\n\t\t}\n\t\n\t\t(0, _jquery2.default)('#itemlistWrapper').append(tpl);\n\t\t_jquery2.default.LayzrUpdate();\n\t}\n\n/***/ },\n\n/***/ 70:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 86:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"{{each list as item i}} <div class=itemlist-item> <a class=itemlist-pic href=\\\"/product/getInfo?id={{item.productId}}\\\"> <img data-normal={{item.productPicPath}}> </a> <div class=itemlist-detail> <a class=itemlist-title href=\\\"/product/getInfo?id={{item.productId}}\\\"> {{item.productName}} </a> <div class=itemlist-horizontal-price> <p>¥ {{item.realPrice}}</p> <a class=\\\"icon-add2car js-add2car\\\" data-pid={{item.productId}}></a> </div> </div> </div> {{/each}}\";\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** itemlist.461f29e53d49f47ccba5.js\n **/","import $ from 'jquery';\nimport template from 'art-template/dist/template';\nimport {\n\tSwiper\n} from 'component';\nimport {\n\tgetItemList\n} from '../../api/item-api';\nimport {\n\thandleError\n} from '../../utils/response-util.js';\nimport itemTpl from './item';\nimport './style';\n\nconst PAGESIZE = 10;\nlet isLoadingList = false;\nlet hasLoadDone = false;\nlet currentPageNo = 1;\nlet currentCid = 1;\nlet carBox;\n\n$(() => {\n\t// 初始化获取数据\n\thasLoadDone = $('input[name=\"hasLoadDone\"]').val() <= PAGESIZE;\n\tcurrentCid = $('input[name=\"cid\"]').val();\n\n\t// 轮播图\n\tnew Swiper('.js-top-swiper', {\n\t\tpagination: '.swiper-pagination',\n    loop: true,\n    autoplay: 3000\n  });\n\n\t// 下拉到底部刷新列表\n\t$(window).onScrollToBottom(() => {\n\t\tif (!hasLoadDone && !isLoadingList) {\n\t\t\tisLoadingList = true;\n\t\t\tfecthItemList();\n\t\t}\n\t});\n});\n\n\nfunction fecthItemList() {\n\tconst $loading = $('.js-loading-box');\n\n\t$loading.removeClass('z-hidden');\n\tgetItemList(currentCid, ++currentPageNo).then(res => {\n\t\t$loading.addClass('z-hidden');\n\t\trenderItemList(res);\n\t}, handleError);\n}\n\nfunction renderItemList(res) {\n\tconst tpl = template.compile(itemTpl)(res);\n\n\tisLoadingList = false;\n\tif (!res.page.hasNext) {\n\t\thasLoadDone = true;\n\t\t$('.js-loaded-all').removeClass('z-hidden');\n\t}\n\n\t$('#itemlistWrapper').append(tpl);\n\t$.LayzrUpdate();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./assets/pages/itemlist/index.js\n **/","module.exports = \"{{each list as item i}} <div class=itemlist-item> <a class=itemlist-pic href=\\\"/product/getInfo?id={{item.productId}}\\\"> <img data-normal={{item.productPicPath}}> </a> <div class=itemlist-detail> <a class=itemlist-title href=\\\"/product/getInfo?id={{item.productId}}\\\"> {{item.productName}} </a> <div class=itemlist-horizontal-price> <p>¥ {{item.realPrice}}</p> <a class=\\\"icon-add2car js-add2car\\\" data-pid={{item.productId}}></a> </div> </div> </div> {{/each}}\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/pages/itemlist/item.tpl\n ** module id = 86\n ** module chunks = 5\n **/"],"sourceRoot":""}